# Contributing (Web2RU)

Этот документ — “правила дорожного движения” для людей и для Codex-агентов.

## 1) Ветки и модель разработки
### 1.1 Базовая модель: GitHub flow (trunk-based)
- `main` всегда должен быть в релизном состоянии.
- Любая работа делается в короткоживущей ветке и вливается через PR.

### 1.2 Нейминг веток
- `feat/<short-slug>` — новая функциональность
- `fix/<short-slug>` — багфикс
- `chore/<short-slug>` — инфраструктура/рефакторинг
- `docs/<short-slug>` — документация

### 1.3 Политика мерджей
- По умолчанию: **Squash merge** (один коммит на PR).
- Исключение: большие “сквозные” изменения, где важна история (решение команды).

## 2) PR процесс (обязательный)
### 2.1 Перед открытием PR
Запустить локально:
```bash
ruff format .
ruff check .
mypy src
pytest -q
```

### 2.2 Что должно быть в PR описании
- цель и контекст,
- что изменено и почему,
- риски (особенно сеть/freeze-js/token protector),
- как тестировать (команды),
- ссылку на issue/task.

### 2.3 Ревью
- Минимум 1 человек-ревьюер.
- Для изменений в `freeze/`, `translate/`, сетевом валидаторе — **обязателен** security reviewer.

## 3) Релизы, теги и версии
### 3.1 SemVer
- `MAJOR`: breaking changes (CLI/форматы/дефолты).
- `MINOR`: новые опции и расширения backward-compatible.
- `PATCH`: багфиксы и внутренние улучшения.

### 3.2 Теги
- релизный тег: `vX.Y.Z`
- теги всегда указывают на коммит в `main`.

### 3.3 Release порядок
1) зелёный `main`,
2) bump версии + changelog,
3) tag,
4) (опционально) публикация артефактов.

## 4) Зависимости
- Не добавлять новые прод-зависимости без согласования.
- В PR должно быть объяснение “зачем” и “почему не стандартная библиотека”.

## 5) Безопасность и приватность
- Никаких скрытых сетевых запросов/телеметрии.
- Любые изменения, влияющие на offline-снапшот и утечки сети — под отдельным вниманием.

## 6) Code of Conduct
- См. `CODE_OF_CONDUCT.md`.

## 7) Security
- См. `SECURITY.md`.
- Не публикуйте секреты (ключи, cookies, storage state, `.env`) в Issues/PR/логах/артефактах.
